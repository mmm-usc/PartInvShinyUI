% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/PartInv.R
\name{PartInvMulti_we}
\alias{PartInvMulti_we}
\alias{PartInv}
\title{Evaluating selection accuracy for two or more groups based on the MCAA Framework}
\usage{
PartInvMulti_we(
  propsel = NULL,
  cut_z = NULL,
  weights_item = NULL,
  weights_latent = NULL,
  alpha,
  psi,
  lambda,
  Theta,
  nu,
  pmix = 0.5,
  pmix_ref = 0.5,
  plot_contour = FALSE,
  show_mi_result = FALSE,
  labels = NULL,
  kappa_r = NULL,
  kappa_f = kappa_r,
  alpha_r = NULL,
  alpha_f = alpha_r,
  phi_r = NULL,
  phi_f = phi_r,
  psi_r = NULL,
  psi_f = psi_r,
  lambda_r = NULL,
  lambda_f = lambda_r,
  tau_r = NULL,
  tau_f = tau_r,
  nu_r = NULL,
  nu_f = nu_r,
  Theta_r = NULL,
  Theta_f = Theta_r,
  ...
)

PartInv(
  propsel = NULL,
  cut_z = NULL,
  weights_item = NULL,
  weights_latent = NULL,
  alpha,
  psi,
  lambda,
  Theta,
  nu,
  pmix = 0.5,
  pmix_ref = 0.5,
  plot_contour = FALSE,
  show_mi_result = FALSE,
  labels = NULL,
  kappa_r = NULL,
  kappa_f = kappa_r,
  alpha_r = NULL,
  alpha_f = alpha_r,
  phi_r = NULL,
  phi_f = phi_r,
  psi_r = NULL,
  psi_f = psi_r,
  lambda_r = NULL,
  lambda_f = lambda_r,
  tau_r = NULL,
  tau_f = tau_r,
  nu_r = NULL,
  nu_f = nu_r,
  Theta_r = NULL,
  Theta_f = Theta_r,
  ...
)
}
\arguments{
\item{propsel}{Proportion of selection. If missing, computed using \code{cut_z}.}

\item{cut_z}{Pre-specified cutoff score on the observed composite. This
argument is ignored when \code{propsel} has input.}

\item{weights_item}{A vector of item weights.}

\item{weights_latent}{A vector of latent factor weights.}

\item{alpha}{A list of length \code{g} containing \verb{1 x d} latent factor mean
vectors where \code{g} is the number of groups and \code{d} is the number of latent
dimensions. The first element is assumed to belong to the reference group.}

\item{psi}{A list of length \code{g} containing \verb{d x d} latent factor
variance-covariance matrices where \code{g} is the number of groups and \code{d} is
the number of latent dimensions. The first element is assumed to belong
to the reference group.}

\item{lambda}{A list of length \code{g} containing \verb{n x d} factor loading matrices
where \code{g} is the number of groups, \code{d} is the number of latent dimensions,
and \code{n} is the number of items in the scale. The first element is assumed
to belong to the reference group.}

\item{Theta}{A list of length \code{g} containing \verb{1 x n} vectors or \verb{n x n}
matrices of unique factor variances and covariances, where \code{g} is the
number of groups and \code{n} is the number of items in the scale. The first
element is assumed to belong to the reference group.}

\item{nu}{A list of length \code{g} containing \verb{1 x n} measurement intercept
vectors where \code{g} is the number of groups and \code{n} is the number of items
in the scale. The first element is assumed to belong to the reference
group.}

\item{pmix}{List of length \code{g} containing the mixing proportions of each
group. If \code{NULL}, defaults to \code{1/g} for each group (i.e., the populations
have equal size).}

\item{plot_contour}{Logical; whether the contour of the populations should be
plotted; \code{TRUE} by default.}

\item{show_mi_result}{If \code{TRUE}, perform selection accuracy analysis
for both the input parameters and the implied parameters based on a
strict invariance model, with common parameter values as weighted
averages of the input values using \code{pmix}.}

\item{labels}{A character vector with \code{g} elements to label the reference
and focal groups on the plot, where \code{g} is the number of groups. If not
provided, groups are labeled automatically as 'Reference' (for the first
group) and 'Focal_1' through 'Focal_(g-1)', where \code{g} is the number of
groups.}

\item{alpha_r, alpha_f, nu_r, nu_f, Theta_r, Theta_f, psi_r, psi_f, lambda_r, lambda_f, phi_r, phi_f, tau_r, tau_f, kappa_r, kappa_f, pmix_ref}{Deprecated; included only for backward compatibility. When comparing two
groups, parameters with the '_r' suffix refer to the reference group while
parameters with the '_f' suffix refer to the focal group.}

\item{...}{Other arguments passed to the \code{\link[graphics]{contour}}
function.}
}
\value{
The output will be a list of six elements and a plot if
\code{plot_contour == TRUE}:
\item{propsel}{Proportion selected.}
\item{cutpt_xi}{Cut point on the latent scale (xi).}
\item{cutpt_z}{Cut point on the observed scale (Z).}
\item{summary}{A \verb{8 x (g + g - 1)} table, with columns representing
the reference and \code{g - 1} focal groups, and the expected results
if the latent distribution of \code{g - 1} focal group match the
reference group. The rows represent probabilities of true
positive (A), false positive (B), true negative (C), false
negative (D); proportion selected, success ratio, sensitivity,
and specificity.}
\item{bivardata}{List of length \code{5} containing \verb{1 x g} vectors of
latent and observed means, standard deviations, and covariances
computed for each groups.}
\item{ai_ratio}{A list of length \code{g - 1} containing the Adverse
Impact (AI) ratio computed for each focal group.}
If \code{show_mi_result = TRUE}, the returned list will have the
additional elements below:
\item{propsel_mi}{Proportion selected under strict invariance.}
\item{cutpt_xi_mi}{Cut point on the latent scale (xi) under strict
invariance.}
\item{cutpt_z_mi}{Cut point on the observed scale (Z) under strict
invariance.}
\item{summary_mi}{A \verb{8 x (g + g - 1)} table, with columns
representing the reference and \code{g - 1} focal groups and the
expected results if the latent distributions of \code{g - 1} focal
groups match the reference group, under strict invariance. The
rows represent probabilities of true positive (A), false positive
(B), true negative (C), false negative (D); proportion selected,
success ratio, sensitivity, and specificity.}
\item{bivardata_mi}{List of length \code{5} containing \verb{1 x g} vectors of
latent and observed means, standard deviations, and covariances
computed for each group under strict invariance.}
}
\description{
\code{PartInv, PartInvMulti_we} evaluates partial measurement invariance using
an extension of Millsap & Kwok's (2004) approach.
}
\examples{
# Two groups, single dimension
PartInv(propsel = .30,
        weights_item = c(1, 1, 1, 1),
        weights_latent = 1,
        alpha_r = 0,
        alpha_f = 0,
        psi_r = 1,
        lambda_r = c(1, 1, 1, 1),
        nu_r = c(1, 1, 1, 2),
        nu_f = c(1, 1, 1, 1),
        Theta_r = diag(1, 4),
        labels = c("Female", "Male"),
        show_mi_result = TRUE)
# Two groups, multiple dimensions
lambda_matrix <- matrix(0, nrow = 5, ncol = 2)
lambda_matrix[1:2, 1] <- c(.322, .655)
lambda_matrix[3:5, 2] <- c(.398, .745, .543)
PartInv(propsel = .05,
        weights_latent = c(0.5, 0.5),
        alpha_r = c(0, 0),
        alpha_f = c(-0.3, 0.1),
        psi_r = matrix(c(1, 0.5, 0.5, 1), nrow = 2),
        lambda_r = lambda_matrix,
        nu_r = c(.225, .025, .010, .240, .125),
        nu_f = c(.225, -.05, .240, -.025, .125),
        Theta_r = diag(1, 5),
        Theta_f = c(1, .95, .80, .75, 1))
PartInv(propsel = .10,
        weights_item = c(1/3, 1/3, 1/3, 1/3),
        weights_latent = 1,
        alpha_r = 0.5,
        alpha_f = 0,
        psi_r = 1,
        lambda_r = c(.3, .5, .9, .7),
        nu_r = c(.225, .025, .010, .240),
        nu_f = c(.225, -.05, .240, -.025),
        Theta_r = diag(.96, 4),
        labels = c("female", "male"),
        show_mi_result = TRUE)
# Multiple groups, multiple dimensions
lambda_matrix <- lambda_matrix1 <- lambda_matrix2 <- matrix(0, nrow = 5, ncol = 2)
lambda_matrix[1:2, 1] <-  c(.322, .655); lambda_matrix[3:5, 2] <- c(.398, .745, .543)
lambda_matrix1[1:2, 1] <-  c(.392, .665); lambda_matrix1[3:5, 2] <- c(.388, .725, .523)
lambda_matrix2[1:2, 1] <-  c(.372, .650); lambda_matrix2[3:5, 2] <- c(.368, .7, .543)
# 2 dimensions, 5 items (2,3), 3 groups
PartInv(propsel = 0.25, cut_z = 2, pmix = c(1/3, 1/3, 1/3),
       alpha = list(c(1,1), c(0,0), c(.5, .5)),
       psi = list(c(1, 0.2, 0.2, 1), c(1, 0.3, 0.3, 1), c(1, 0.4, 0.4, 1)),
       nu = list(c(rep(1,5)), c(rep(1.5,5)),c(rep(1.2,5))),
       lambda = list(lambda_matrix, lambda_matrix1, lambda_matrix2),
       Theta = list(c(rep(.1,5)), c(rep(.4,5)), c(rep(.3,5))),
       plot_contour = TRUE, labels = c("Group 1", "Group 2", "Group 3"),
       custom_colors = c("salmon1", "lightgreen", "skyblue1"), 
       show_mi_result = TRUE)
}
