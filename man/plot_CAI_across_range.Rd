% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_CAI_across_range.R
\name{plot_CAI_across_range}
\alias{plot_CAI_across_range}
\title{Plot classification accuracy indices at different proportions of selection
or at different threshold (cutoff) values}
\usage{
plot_CAI_across_range(
  cfa_fit,
  pmix = NULL,
  labels = NULL,
  cai_names = c("PS", "SR", "SE", "SP", "AI"),
  mod_names = c("par", "str"),
  from = 0.01,
  to = 0.25,
  by = 0.01,
  cutoffs_from = NULL,
  cutoffs_to = NULL,
  custom_colors = NULL,
  reference = NULL,
  add_AI_threshold_lines = TRUE,
  add_vertical_threshold_at = NULL,
  plot_only_g = NULL,
  ...
)
}
\arguments{
\item{cfa_fit}{CFA model output from lavaan.}

\item{pmix}{List of length \code{g} containing the mixing proportions of each
group (where \code{g} is the number of groups). If \code{NULL}, defaults to \code{1/g}
for each group (i.e., the populations have equal size).}

\item{labels}{A character vector with \code{g} elements to label the reference
and focal groups on the plot, where \code{g} is the number of groups. If not
provided, groups are labeled automatically as 'Reference' (for the first
group) and 'Focal_1' through 'Focal_(g-1)', where \code{g} is the number of
groups.}

\item{cai_names}{A vector of strings indicating the classification accuracy
indices of interest. c("PS", "SR", "SE", "SP", "AI) by default.}

\item{mod_names}{A vector of strings indicating the invariance conditions of
interest. c("par", "str") by default.}

\item{from}{The lowest proportion of selection to consider. \code{0.01} by default.}

\item{to}{The largest proportion of selection to consider. \code{0.25} by default.}

\item{by}{The increment of the sequence of proportions. \code{0.01} by default.}

\item{cutoffs_from}{The lowest threshold to consider.\code{NULL} by default.}

\item{cutoffs_to}{The largest threshold to consider. \code{NULL} by default.}

\item{custom_colors}{Optional argument for specifying colors. \code{NULL} by default.}

\item{reference}{Optional argument for specifying the reference group.}

\item{add_AI_threshold_lines}{Whether horizontal lines at AI = 1 and AI = 0.8
should be plotted. \code{TRUE} by default.}

\item{add_vertical_threshold_at}{Adds a vertical line at a specified threshold
value for easier comparison. \code{NULL} by default.}

\item{plot_only_g}{Optional argument, vector of strings specifying the labels
of the subset of groups to be plotted. The reference group is always
plotted. Ignored if all elements do not appear in \code{labels}.}

\item{...}{Additional arguments.}
}
\value{
Eight plots illustrating how proportion selected (PS), success ratio
(SR), sensitivity (SE), and specificity (SP) change across different
proportions of selection under partial and strict invariance conditions.
}
\description{
\code{plot_CAI_across_range} plots classification accuracy indices at different
proportions of selection under partial and strict invariance conditions for
a given CFA fit.
}
\examples{
\dontrun{
set.seed(7)  
# Simulate random data to fit a multigroup CFA, invariance across languages
library(lavaan)
sim_m <-
  "f =~ c(1, .7, 1) * x1 + c(.8, 1.1, 1) * x2 + 1 * x3 + 1 * x4 + 1 * x5
   f ~~ c(1, 1.3, 1.5) * f
   f ~  c(0, .5, 1) * 1
   x1 ~ c(0, .3, 0) * 1
   x3 ~ c(.3, 0, -.3) * 1
   x1 ~~ c(1, .5, 1) * x1"
dat_sim <- simulateData(sim_m, sample.nobs = c(120, 90, 50))
dat_sim$group <- ifelse(dat_sim$group == 1, "English",
                 ifelse(dat_sim$group == 2, "Japanese",
                 ifelse(dat_sim$group == 3, "Swahili", NA)))
fit_sim <- lavaan::cfa(model = sim_m, data = dat_sim, group = "group")
plot_CAI_across_range(cfa_fit = fit_sim)
plot_CAI_across_range(cfa_fit = fit_sim, custom_colors = c("blue", "pink", "red"))
plot_CAI_across_range(cfa_fit = fit_sim, plot_only_g = "Japanese")

library(lavaan)
HS <- HolzingerSwineford1939
HS$sex <- as.factor(HS$sex)
HS.model <- ' visual  =~ x1 + x2 + x3
              textual =~ x4 + x5 + x6
              speed   =~ x7 + x8 + x9 '
fit <- cfa(HS.model, data = HS, group = "sex")
plot_CAI_across_range(fit, pmix = table(HS$sex) / sum(table(HS$sex)), 
                 cutoffs_from = 35, cutoffs_to = 50)
# plot only SR under partial invariance for up to 10\% selection.
plot_CAI_across_range(fit, pmix = table(HS$sex)/sum(table(HS$sex)), 
    from = 0.01, to = 0.10, cai_names = "SR", mod_names = "par", 
     labels = c("Male", "Female"))
}
}
